{"version":3,"file":"Team-yPGp8pGx.js","sources":["../../src/components/lists/ProductionTeamList.vue","../../src/components/pages/Team.vue"],"sourcesContent":["<template>\n  <div class=\"data-list\">\n    <div class=\"datatable-wrapper\">\n      <table class=\"datatable\">\n        <thead class=\"datatable-head\">\n          <tr>\n            <th scope=\"col\" class=\"name datatable-row-header\">\n              {{ $t('people.list.name') }}\n            </th>\n            <th scope=\"col\" class=\"email\">\n              {{ $t('people.list.email') }}\n            </th>\n            <th scope=\"col\" class=\"phone\">\n              {{ $t('people.list.phone') }}\n            </th>\n            <th scope=\"col\" class=\"role\">\n              {{ $t('people.list.role') }}\n            </th>\n            <th scope=\"col\">\n              {{ $t('people.list.departments') }}\n            </th>\n            <th scope=\"col\" class=\"actions\"></th>\n          </tr>\n        </thead>\n        <tbody class=\"datatable-body\" v-if=\"!isEmpty\">\n          <tr class=\"datatable-row\" v-for=\"person in entries\" :key=\"person.id\">\n            <people-name-cell\n              class=\"name datatable-row-header\"\n              :person=\"person\"\n            />\n            <td class=\"email\">{{ person.email }}</td>\n            <td class=\"phone\">{{ person.phone }}</td>\n            <td class=\"role\">{{ $t(`people.role.${person.role}`) }}</td>\n            <department-names-cell :departments=\"person.departments\" />\n            <td class=\"actions\">\n              <button\n                class=\"button\"\n                @click=\"removePerson(person)\"\n                v-if=\"isCurrentUserAdmin\"\n              >\n                {{ $t('main.remove') }}\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <p class=\"has-text-centered mt2\" v-if=\"isEmpty\">\n      {{ $t('people.empty_team') }}\n    </p>\n\n    <p class=\"has-text-centered footer-info\" v-else>\n      {{ entries.length }} {{ $tc('people.persons', entries.length) }}\n    </p>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport DepartmentNamesCell from '@/components/cells/DepartmentNamesCell'\nimport PeopleNameCell from '@/components/cells/PeopleNameCell'\n\nexport default {\n  name: 'production-team-list',\n  components: {\n    DepartmentNamesCell,\n    PeopleNameCell\n  },\n\n  props: {\n    entries: {\n      type: Array,\n      default: () => []\n    }\n  },\n\n  computed: {\n    ...mapGetters(['isCurrentUserAdmin']),\n\n    isEmpty() {\n      return !this.entries?.length\n    }\n  },\n\n  methods: {\n    ...mapActions(['removePersonFromTeam']),\n\n    removePerson(person) {\n      this.removePersonFromTeam(person)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.datatable-body tr:first-child th,\n.datatable-body tr:first-child td {\n  border-top: 0;\n}\n.name {\n  width: 230px;\n  min-width: 230px;\n}\n.email {\n  width: 300px;\n  min-width: 300px;\n}\n.phone {\n  width: 200px;\n  min-width: 200px;\n}\n.role {\n  width: 125px;\n  min-width: 125px;\n}\n.actions {\n  min-width: 100px;\n}\n\n.data-list {\n  margin-top: 2em;\n}\n</style>\n","<template>\n  <div class=\"people page fixed-page\">\n    <div class=\"flexrow mt2 add-people\" v-if=\"isCurrentUserManager\">\n      <people-field\n        ref=\"people-field\"\n        class=\"flexrow-item add-people-field\"\n        :people=\"unlistedPeople\"\n        :placeholder=\"$t('people.add_member_to_team')\"\n        big\n        @enter=\"addPerson\"\n        v-model=\"person\"\n      />\n      <button\n        class=\"button flexrow-item\"\n        @click=\"addPerson\"\n        :disabled=\"!person\"\n      >\n        {{ $t('main.add') }}\n      </button>\n    </div>\n\n    <production-team-list\n      :entries=\"teamPersons\"\n      :is-loading=\"isTeamLoading\"\n      :is-error=\"isTeamLoadingError\"\n      @remove=\"removePerson\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\n\nimport { sortPeople } from '@/lib/sorting'\n\nimport PeopleField from '@/components/widgets/PeopleField'\nimport ProductionTeamList from '@/components/lists/ProductionTeamList'\n\nexport default {\n  name: 'team',\n\n  components: {\n    PeopleField,\n    ProductionTeamList\n  },\n\n  data() {\n    return {\n      person: null,\n      isTeamLoading: false,\n      isTeamLoadingError: false\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'currentProduction',\n      'isCurrentUserManager',\n      'openProductions',\n      'people',\n      'personMap'\n    ]),\n\n    teamPersons() {\n      return sortPeople(\n        this.currentProduction.team.map(personId =>\n          this.personMap.get(personId)\n        )\n      )\n    },\n\n    unlistedPeople() {\n      return this.people.filter(\n        person =>\n          !this.currentProduction.team.includes(person.id) && person.active\n      )\n    }\n  },\n\n  methods: {\n    ...mapActions(['addPersonToTeam']),\n\n    addPerson() {\n      if (this.person) {\n        this.addPersonToTeam(this.person)\n        setTimeout(() => {\n          this.$refs['people-field'].clear()\n        }, 1)\n      }\n    },\n\n    removePerson(person) {\n      this.removePersonFromTeam(person)\n    }\n  },\n\n  metaInfo() {\n    return {\n      title: `${this.currentProduction.name} | ${this.$t(\n        'people.team'\n      )} - Kitsu`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped></style>\n"],"names":["_sfc_main","DepartmentNamesCell","PeopleNameCell","mapGetters","_a","mapActions","person","PeopleField","ProductionTeamList","sortPeople","personId"],"mappings":"wKA+DA,MAAAA,EAAA,CACA,KAAA,uBACA,WAAA,CACA,oBAAAC,EACA,eAAAC,CACA,EAEA,MAAA,CACA,QAAA,CACA,KAAA,MACA,QAAA,IAAA,CAAA,CACA,CACA,EAEA,SAAA,CACA,GAAAC,EAAA,CAAA,oBAAA,CAAA,EAEA,SAAA,OACA,MAAA,GAAAC,EAAA,KAAA,UAAA,MAAAA,EAAA,OACA,CACA,EAEA,QAAA,CACA,GAAAC,EAAA,CAAA,sBAAA,CAAA,EAEA,aAAAC,EAAA,CACA,KAAA,qBAAAA,CAAA,CACA,CACA,CACA,ysDCtDAN,EAAA,CACA,KAAA,OAEA,WAAA,CACA,YAAAO,EACA,mBAAAC,CACA,EAEA,MAAA,CACA,MAAA,CACA,OAAA,KACA,cAAA,GACA,mBAAA,EACA,CACA,EAEA,SAAA,CACA,GAAAL,EAAA,CACA,oBACA,uBACA,kBACA,SACA,WACA,CAAA,EAEA,aAAA,CACA,OAAAM,EACA,KAAA,kBAAA,KAAA,IAAAC,GACA,KAAA,UAAA,IAAAA,CAAA,CACA,CACA,CACA,EAEA,gBAAA,CACA,OAAA,KAAA,OAAA,OACAJ,GACA,CAAA,KAAA,kBAAA,KAAA,SAAAA,EAAA,EAAA,GAAAA,EAAA,MACA,CACA,CACA,EAEA,QAAA,CACA,GAAAD,EAAA,CAAA,iBAAA,CAAA,EAEA,WAAA,CACA,KAAA,SACA,KAAA,gBAAA,KAAA,MAAA,EACA,WAAA,IAAA,CACA,KAAA,MAAA,cAAA,EAAA,MAAA,CACA,EAAA,CAAA,EAEA,EAEA,aAAAC,EAAA,CACA,KAAA,qBAAAA,CAAA,CACA,CACA,EAEA,UAAA,CACA,MAAA,CACA,MAAA,GAAA,KAAA,kBAAA,IAAA,MAAA,KAAA,GACA,aACA,CAAA,UACA,CACA,CACA"}